<head>
  <meta charset="UTF-8" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Tangerine"
  />
</head>

<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script
  src="https://cdn.jsdelivr.net/npm/geoviz@0.7.9"
  charset="utf-8"
></script>

<script>
  let geojson = "./world.json";
  d3.json(geojson).then((data) => {
    let svg = geoviz.create({ projection: "EqualEarth" });
    svg.plot({ type: "outline" });
    svg.plot({
      type: "graticule",
      stroke: "white",
      step: 30,
      strokeWidth: 1.2,
    });
    svg.plot({
      type: "choro",
      data: data,
      var: "gdppc",
      strokeWidth: 0.3,
      tip: true,
      leg_type: "horizontal",
      leg_title: "GDP per capita",
      leg_subtitle: "($ per inh.)",
      leg_note: "Source: worldbank, 2020",
      leg_pos: [410, 370],
      leg_values_round: 0,
      leg_missing_text: "Missing values",
    });
    svg.plot({
      type: "header",
      fontSize: 30,
      text: "A Choropleth World Map",
      fill: "#267A8A",
      fontWeight: "bold",
      fontFamily: "Tangerine",
    });
    document.body.appendChild(svg.render());
  });
</script>
